# STM32Gx-UART
Библиотека для максимально удобного использования аппаратных UART на **STM32G4xx** и **STM32G0xx**

### Особенности:
- Работает с аппаратными **LPUART1**, **USART1...USART3**, **UART4...UART5**
- Доступен только асинхронный (UART) режим в формате **8N1**, скорость **4800...2000000** Бод/с
- Реализован вывод основных типов данных методом **print()**
- Реализован **printf()** - печать форматированной строки
- Реализован вывод чисел 8-32 бита в **полном** двоичном виде 
- Независимые FIFO буферы, конфигурируемый размер 
- Полностью фоновая работа по прерываниям
- Неблокирующие функции печати, пока есть место в буфере
- Тактирование от **HSI16** (по умолчанию) и **SYSCLK** (при желании)
- Максимально удобная работа со всеми UART

### ВНИМАНИЕ!
- Совместимо **только** с проектами **C++**! 
- Библиотека **не настраивает** GPIO и системное тактирование!

## Как использовать?
1. Добавь **stm32gx_uart.hpp** в свой проект 
2. Настрой **тактирование** системы (при помощи CubeMX или CMSIS)
3. Настрой **GPIO** выбранных UART в режим альт. функции **UARTx**
4. Инициализировать UART в CubeMX **не нужно!**
5. Создай объект(ы) UART (пример для **USART1**):
	```
    STM32G_UART <UART_FULL> uart(USART1);	
    ``` 
6. Создай обработчик(и) прерывания выбранного UART (пример для **USART1**):
	```
    extern "C" void USART1_IRQHandler () {
		uart.IRQ();
	}
    ``` 
7. Вызови метод **init()** (пример для 115200 Бод/с):
	```
    uart.init(115200); 
    ``` 
8. Выводи данные в порт при помощи **print()** или **printf()**:
	```
	uint32_t data = 1523142134;
	float value = 532.7613;
	
	uart.print(data); 
	uart.print(", ");
	uart.print(value);
	uart.println();
	
	uart.printf("long: %d, float: %f \r\n", data, value); 
    ```

9. Читай данные из порта при помощи **read()**:
	```
	while(uart.available()){
		uint8_t data = uart.read();
	}	
    ```
## Полный API:
### Создание объекта:
При создании объекта UART можно указать:
- Режим работы (полудуплексный или полнодуплексный)
- Размер **приемного** буфера FIFO 
- Размер **передающего** буфера FIFO  
Индивидуально для каждого объекта UART 


